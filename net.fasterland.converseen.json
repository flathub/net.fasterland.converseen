{
    "id": "net.fasterland.converseen",
    "runtime": "org.kde.Platform",
    "runtime-version": "6.10",
    "sdk": "org.kde.Sdk",
    "command": "converseen",
    "rename-appdata-file": "converseen.appdata.xml",
    "rename-icon": "converseen",
    "finish-args": [
        "--device=dri",
        "--filesystem=xdg-pictures",
        "--filesystem=/media",
        "--filesystem=/run/media",
        "--filesystem=home",
        "--share=ipc",
        "--share=network",
        "--socket=cups",
        "--socket=fallback-x11",
        "--socket=wayland"
    ],
    "cleanup": [
        "/doc",
        "/include",
        "/lib/cmake",
        "/lib/libexec",
        "/lib/pkgconfig",
        "/man",
        "/share/doc",
        "/share/man",
        "/share/pkgconfig",
        "*.la",
        "*.a"
    ],
    "modules": [
        {
            "name": "libraw",
            "config-opts": [
                "--disable-examples",
                "--disable-jasper",
                "--disable-static",
                "--enable-jpeg",
                "--enable-lcms",
                "--enable-openmp"
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://www.libraw.org/data/LibRaw-0.22.0.tar.gz",
                    "sha256": "1071e6e8011593c366ffdadc3d3513f57c90202d526e133174945ec1dd53f2a1",
                    "x-checker-data": {
                        "type": "anitya",
                        "project-id": 1709,
                        "stable-only": true,
                        "url-template": "https://www.libraw.org/data/LibRaw-$version.tar.gz"
                    }
                }
            ]
        },
        {
            "name": "libwmf",
            "config-opts": [
                "--disable-static",
                "--disable-dependency-tracking"
            ],
            "cleanup": [
                "/bin"
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://github.com/caolanm/libwmf/archive/refs/tags/v0.2.14.tar.gz",
                    "sha512": "5f2068e89eb3998acd40a7d7272f2bba7d8366b1bf647ba10a4415cca2229ae5d8175140e49ea232c7e16887c64e9129df9f0effd045bf96887f2eada4e10992",
                    "x-checker-data": {
                        "type": "anitya",
                        "project-id": 230209,
                        "stable-only": true,
                        "url-template": "https://github.com/caolanm/libwmf/archive/refs/tags/v$version.tar.gz"
                    }
                },
                {
                    "type": "shell",
                    "commands": [
                        "cp -p /usr/share/automake-*/config.{sub,guess} .",
                        "autoreconf -vfi"
                    ]
                }
            ]
        },
        {
            "name": "openexr",
            "buildsystem": "cmake-ninja",
            "config-opts": [
                "-DOPENEXR_BUILD_TOOLS=OFF",
                "-DOPENEXR_INSTALL_TOOLS=OFF",
                "-DBUILD_TESTING=OFF"
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://github.com/AcademySoftwareFoundation/openexr/releases/download/v3.4.5/openexr-3.4.5.tar.gz",
                    "sha256": "3e3b0c697acb7383ed476276e8ca3933d1e099249c080d3c91642515e6b5b84a",
                    "x-checker-data": {
                        "type": "anitya",
                        "project-id": 13289,
                        "stable-only": true,
                        "url-template": "https://github.com/AcademySoftwareFoundation/openexr/releases/download/v$version/openexr-$version.tar.gz"
                    }
                }
            ],
            "cleanup": [
                "/bin",
                "/share/aclocal"
            ],
            "modules": [
                {
                    "name": "Imath",
                    "buildsystem": "cmake-ninja",
                    "config-opts": [
                        "-DBUILD_TESTING=OFF"
                    ],
                    "sources": [
                        {
                            "type": "archive",
                            "url": "https://github.com/AcademySoftwareFoundation/Imath/archive/refs/tags/v3.2.2.tar.gz",
                            "sha256": "b4275d83fb95521510e389b8d13af10298ed5bed1c8e13efd961d91b1105e462",
                            "x-checker-data": {
                                "type": "anitya",
                                "project-id": 223366,
                                "stable-only": true,
                                "url-template": "https://github.com/AcademySoftwareFoundation/Imath/archive/refs/tags/v$version.tar.gz"
                            }
                        }
                    ]
                },
                {
                    "name": "libdeflate",
                    "sources": [
                        {
                            "type": "archive",
                            "url": "https://github.com/ebiggers/libdeflate/archive/refs/tags/v1.25.zip",
                            "sha256": "5ce391d1d09ff2f6b21af492fa72bd693e416a4a682ec48c04f91e5c0e16f383",
                            "x-checker-data": {
                                "type": "anitya",
                                "project-id": 242778,
                                "stable-only": true,
                                "url-template": "https://github.com/ebiggers/libdeflate/archive/refs/tags/v$version.zip"
                            }
                        }
                    ],
                    "buildsystem": "cmake-ninja",
                    "config-opts": [
                        "-DLIBDEFLATE_BUILD_STATIC_LIB=OFF",
                        "-DLIBDEFLATE_GZIP_SUPPORT=OFF",
                        "-DLIBDEFLATE_BUILD_GZIP=OFF"
                    ]
                },
                {
                    "name": "openjph",
                    "sources": [
                        {
                            "type": "archive",
                            "url": "https://github.com/aous72/OpenJPH/archive/refs/tags/0.26.3.tar.gz",
                            "sha256": "29de006da7f1e8cf0cd7c3ec424cf29103e465052c00b5a5f0ccb7e1f917bb3f",
                            "x-checker-data": {
                                "type": "anitya",
                                "project-id": 375199,
                                "stable-only": true,
                                "url-template": "https://github.com/aous72/OpenJPH/archive/refs/tags/$version.tar.gz"
                            }
                        }
                    ],
                    "buildsystem": "cmake-ninja",
                    "builddir": true,
                    "config-opts": [
                        "-DOJPH_ENABLE_TIFF_SUPPORT=OFF",
                        "-DOJPH_BUILD_EXECUTABLES=OFF"
                    ]
                }
            ]
        },
        {
            "name": "ghostscript",
            "config-opts": [
                "--disable-cups",
                "--disable-gtk",
                "--without-tesseract",
                "--without-libpaper",
                "--without-pdftoraster"
            ],
            "make-args": [
                "so"
            ],
            "make-install-args": [
                "soinstall"
            ],
            "cleanup": [
                "/bin",
                "/share"
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://github.com/ArtifexSoftware/ghostpdl-downloads/releases/download/gs10060/ghostscript-10.06.0.tar.gz",
                    "sha256": "5bd6da34794928cc7e616f288e32bd0be7f9a5ca2d3c206a0af2c19a4e3a318f",
                    "x-checker-data": {
                        "type": "anitya",
                        "project-id": 1157,
                        "stable-only": true,
                        "url-template": "https://github.com/ArtifexSoftware/ghostpdl-downloads/releases/download/gs${major}0${minor}${patch}/ghostscript-$version.tar.gz"
                    }
                },
                {
                    "type": "shell",
                    "commands": [
                        "cp -p /usr/share/automake-*/config.{sub,guess} freetype/builds/unix/",
                        "cp -p /usr/share/automake-*/config.{sub,guess} ijs/",
                        "cp -p /usr/share/automake-*/config.{sub,guess} jpeg/",
                        "cp -p /usr/share/automake-*/config.{sub,guess} libpng/",
                        "cp -p /usr/share/automake-*/config.{sub,guess} lcms2mt/",
                        "cp -p /usr/share/automake-*/config.{sub,guess} tiff/config/",
                        "rm -rf libpng/pngread.c"
                    ]
                }
            ]
        },
        {
            "name": "imagemagick",
            "config-opts": [
                "--disable-static",
                "--enable-shared",
                "--enable-hdri",
                "--without-perl",
                "--with-gslib=yes",
                "--with-openjp2",
                "--with-wmf",
                "--without-gvc",
                "--with-djvu",
                "--without-dps",
                "--without-fpx",
                "--with-heic=yes"
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://github.com/ImageMagick/ImageMagick/archive/7.1.2-15.tar.gz",
                    "sha256": "bf646e7fffdf50b7d886eec6bbe51c3ced1c4d68fbabfcc534e014575359fe7f",
                    "x-checker-data": {
                        "type": "anitya",
                        "project-id": 1372,
                        "stable-only": true,
                        "url-template": "https://github.com/ImageMagick/ImageMagick/archive/$version.tar.gz"
                    }
                }
            ],
            "cleanup": [
                "/bin"
            ]
        },
        {
            "name": "converseen",
            "buildsystem": "cmake-ninja",
            "config-opts": [
                "-DUSE_QT6=yes"
            ],
            "sources": [
                {
                    "type": "git",
                    "url": "https://github.com/Faster3ck/Converseen.git",
                    "tag": "v0.15.1.3",
                    "commit": "7d8b8401d0809e54574bd96256ee23221337c2e3",
                    "x-checker-data": {
                        "type": "git",
                        "tag-pattern": "^v([\\d.]+)$"
                    }
                }
            ]
        }
    ]
}
